import{_ as h,s as f,e as d,f as v,g as w,h as m,v as P,x as g,c as k,o as x,w as B,a as t,y as C,t as i,l as j}from"./index-BNaTmjPP.js";import{B as b}from"./BaseCard-Bnuw-Bye.js";import{c as M,a as _,f as T,b as I,d as R,u as S,e as D,g as H}from"./projectRepository-CTpxSQ9r.js";const q={class:"project-card"},z={class:"project-card__content"},A={class:"project-card__header"},L={class:"project-card__title"},N={class:"project-card__rate"},O={class:"project-card__stats"},V={class:"project-card__stat"},E={class:"project-card__stat"},F={__name:"ProjectCard",props:{project:{type:Object,required:!0}},setup(s){const o=s,r=f(),c=d(0),u=v(()=>M(c.value,o.project.hourlyRate));w(async()=>{await l()}),m(()=>o.project.id,async()=>{await l()});async function l(){try{const e=(await P(o.project.id)).map(a=>a.id);c.value=await g(e)}catch(n){console.error("Ошибка загрузки статистики проекта:",n)}}function p(){r.push({name:"project",params:{id:o.project.id}})}return(n,e)=>(x(),k(b,{clickable:!0,onClick:p},{default:B(()=>[t("div",q,[t("div",{class:"project-card__color",style:C({backgroundColor:s.project.color})},null,4),t("div",z,[t("div",A,[t("h3",L,i(s.project.name),1),t("span",N,i(j(_)(s.project.hourlyRate))+"/час",1)]),t("div",O,[t("div",V,[e[0]||(e[0]=t("svg",{class:"project-card__icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12,6 12,12 16,14"})],-1)),t("span",null,i(j(T)(c.value)),1)]),t("div",E,[e[1]||(e[1]=t("svg",{class:"project-card__icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),t("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})],-1)),t("span",null,i(j(_)(u.value)),1)])])])])]),_:1}))}},Q=h(F,[["__scopeId","data-v-fb0eb544"]]);function U(){const s=d([]),o=d(!1),r=d(null);async function c(){o.value=!0,r.value=null;try{s.value=await H()}catch(e){r.value="Не удалось загрузить проекты",console.error("Ошибка загрузки проектов:",e)}finally{o.value=!1}}async function u(e){try{const a=await D(e);return await c(),a}catch(a){return r.value="Не удалось создать проект",console.error("Ошибка создания проекта:",a),null}}async function l(e,a){try{await S(e,a),await c()}catch(y){r.value="Не удалось обновить проект",console.error("Ошибка обновления проекта:",y)}}async function p(e){try{await R(e),await c()}catch(a){r.value="Не удалось удалить проект",console.error("Ошибка удаления проекта:",a)}}async function n(e){try{return await I(e)}catch(a){console.error("Ошибка получения проекта:",a);return}}return{projects:s,isLoading:o,error:r,loadProjects:c,addProject:u,editProject:l,removeProject:p,getProject:n}}export{Q as P,U as u};
